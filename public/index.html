<html>
	<head>
		<title>ASF Virtual App</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="css/main.css" />
	</head>
	<body class="is-preload">

		<!--Heading-->
			<header id="header">
				<h1>Welcome to ASFVirtual! </h1>
				<p>Planning Poker. Real time Estimations. Virtual Scrums. All your ASF resources in one platform.</a>.</p>
			</header>

		<!-- LOGIN SCREEN-->
		<div id="div1">
				<p id="userNameDisplay">Username: </p>
				<p id="roomCodeDisplay">Room Code:</p>
		</div>
		<div id="div2">
				<label for="positions">Who are you?</label>
				<select name="positions" id="positions">
						<option value = "Scrum Master">Scrum Master</option>
						<option value = "Product Team">Product Team</option>
						<option value = "Member">Member</option>
						<option value = "BA/PO">BA/PO</option>
						<option value = "Guest">Guest</option>
				</select>
				<input id="textarea1" type=text>
				<button id="submit" onclick='submitButton()'>submit</button>
				<button id="generateCode" onclick='generateCode()'>Generate Room Code</button>



		</div>

		<!-- Footer -->
			<footer id="footer">
				<ul class="copyright">
					<li>&copy; CACI.</li><li>Credits:HTML5 UP</a></li>
				</ul>
			</footer>

		<!-- Scripts -->
	<script>
	function submitButton(){

    var dDM = document.getElementById("positions"); // gets the dropdown menu from DOM
    var input = dDM.options[dDM.selectedIndex].text //gets selected item from dropDownMenu
    var text = document.getElementById("textarea1").value; //gets input from textbox
    if(text == ""){
        alert("Must Enter Name Before Sumbission");//make alert when <input> has no vlaue
        return;
    }
    document.getElementById('userNameDisplay').innerHTML = "Username: " + text;

    if(input == "Scrum Master"){ //if ScrumMaster is selected reveal generateCode Button
        document.getElementById("generateCode").style.visibility = "visible";
    } else {//otherwise Make sure it is hidden (if previously selected SM)
        document.getElementById("generateCode").style.visibility = "hidden";
        document.getElementById("roomCodeDisplay").innerHTML = "Room Code:";
    }
		const data = {text, input};
		const options = {
				method: 'POST',
				headers: {
						"Content-Type": "application/json"
				},
				body: JSON.stringify(data)
		};
		fetch('/api', options);
 }

 function generateCode(){
     var code = "";
        for(var i = 0; i< 7;i++){
            code += " " + parseInt(Math.random()*10);
        }
	 document.getElementById('roomCodeDisplay').innerHTML = "Room Code:" + code;
	 const data = { code };
				const options = {
			 		 method: 'POST',
			 		 headers:{
			 				 "Content-Type": "application/json"
			 		 },
			 		 body: JSON.stringify(data)
			  };
			  fetch('/api', options);
			 }
			
			</script>

	</body>
</html>
